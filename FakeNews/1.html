<?php
  $db = new PDO('sqlite:database/news.db');
  $stmt = $db->prepare('SELECT news.*, users.*, COUNT(comments.id) AS comments
                        FROM news JOIN
                            users USING (username) LEFT JOIN
                            comments ON comments.news_id = news.id
                        GROUP BY news.id, users.username
                        ORDER BY published DESC');
  $stmt->execute();
  $articles = $stmt->fetchAll();
  foreach( $articles as $article) {?>
<article>
    <header>
        <h1><a href="item.html">
                <?=$article['title']?> </a></h1>
    </header>
    <img src="https://loremflickr.com/1200/600/<?=$article['tags']?>" alt="">
    <p>
        <?=$article['introduction']?>
    </p>
    <p>
        <?=$article['fulltext']?>
    </p>
    <footer>
        <span class="author">
            <?=$article['username']?></span>
        <span class="tags"><a href="index.html">
                <?=$article['tags']?></a> <a href="index.html">#life</a></span>
        <span class="date">
            <?=$article['published']?></span>
        <a class="comments" href="item.html#comments">0</a>
    </footer>
</article>
<?php }?>